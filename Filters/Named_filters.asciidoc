[[named-filters]]
=== Named filters

Sometimes it is useful to know which filters a document matched.  For instance,
you may want to include users of all ages, but know which age group each user
falls into. This can be done by assigning each filter a name, with the
`_name` parameter:


[source,js]
--------------------------------------------------
{
    "bool" : {
        "should": [
            { "range" : {
                  "_name" : "child",
                  "age"   : { "to" :  13 }
            }},
            { "range" : {
                  "_name" : "teenager",
                  "age"   : { "from" : 13, "to" :  18 }
            }},
            { "range" : {
                  "_name" : "adult",
                  "age"   : { "from" :  18 }
            }}
        ]
    }
}
--------------------------------------------------


Each result that matches a named filter will include a `matched_filters`
key with the names of the matching filters:

[source,js]
--------------------------------------------------
{
    "_index" :           "myindex",
    "_type" :            "user",
    "_id" :              "1",
    "matched_filters" : ["teenager"],
    "_source" : {
        "age" :   15,
        ...
    }
}
--------------------------------------------------


The only exception to this format is the `query` filter, which needs
the query to be wrapped in an extra `fquery` layer:

[source,js]
--------------------------------------------------
{
    "query" : {
        "fquery" : {
            "query" :  { ... }
            "_name" :  "foo"
        }
    }
}
--------------------------------------------------


